\documentclass[a4paper,10pt]{article}

\usepackage[utf8]{inputenc}     % Encodage du texte (caractères accentués).
\usepackage[french]{babel}      % Langue du document.
\usepackage[sfdefault]{roboto}  % Police d'écriture utilisée dans le document.
\usepackage[T1]{fontenc}		% Règle de césure pour les caractères accentués (pour le compilateur).

\usepackage{fancyhdr}           % Ajout de headers et footers à chaque page du document.
\usepackage{hyperref}           % Création de liens cliquables pointant vers d'autres parties du document.
\usepackage{parskip}

\usepackage[usenames,dvipsnames]{xcolor}	% Coloration du texte.
\usepackage{verbatim}						% Mise en page des paragraphes.

\usepackage[document]{ragged2e}								% Justification du texte.
\usepackage[a4paper,margin=1in,footskip=0.25in]{geometry}	% Mise en page du document.

\fontfamily{Roboto}

\pagecolor{black}
\title{\color{red}Fonctions du fichier de librairie \color{lime}Status.lib}\color{white}
\author{Dimitri OBEID}
\date{2021}
\pagestyle{fancy}

\pdfinfo{
  /Title    (Fonctions du fichier de librairie Status.lib)
  /Author   (Dimitri OBEID)
  /Creator  (Dimitri OBEID)
  /Producer (Dimitri OBEID)
  /Subject  (Fonctions du fichier de librairie Status.lib)
  /Keywords ()
}

% Definition de couleurs.
\definecolor{mauve}{RGB}{128, 0, 128}
\definecolor{brick}{HTML}{be480a}

% Mise en page des paragraphes.
\setlength{\parskip}{1em}

\begin{document}
\maketitle
\newpage

\hypertarget{contents}{}
\tableofcontents
\newpage

\color{red}
\section{Présentation}\color{white}

\color{green}
\subsection{Présentation}\color{white}

\begin{justify}
    Ce fichier source inclut des fonctions servant à la gestion des valeurs des variables globales de statut : gestions d'erreurs et changement de valeur assité.
\end{justify}


% -----------------------

% -----------------------------------------------

\color{green}\par\noindent\rule{\textwidth}{0.4pt}\color{white}

\color{green}
\subsection{Définitions des éléments mentionnés}\color{white}

\color{blue}
\subsubsection{Chemins de fichiers}\color{white}

\textbf{Nom du fichier : \color{lime}Checkings.lib}\\[1\baselineskip]
\textbf{Dossier parent : \color{orange}\$\_\_BU\_MAIN\_ROOT\_DIR\_PATH\color{lime}/lib/functions/main}\\[1\baselineskip]


% -----------------------

\color{lime}\par\noindent\rule{\textwidth}{0.4pt}\color{white}\\[1\baselineskip]

\textbf{Nom du fichier : \color{lime}Colors.conf}\\[1\baselineskip]

\textbf{Dossier parent : \color{orange}\$\_\_BU\_MODULE\_UTILS\_ROOT\color{lime}/config/modules/main}\\[1\baselineskip]


% -----------------------

\color{lime}\par\noindent\rule{\textwidth}{0.4pt}\color{white}\\[1\baselineskip]

\textbf{Nom du fichier : \color{lime}Status.conf}\\[1\baselineskip]

\textbf{Dossier parent : \color{orange}\$\_\_BU\_MODULE\_UTILS\_ROOT\color{lime}/config/modules/main}\\[1\baselineskip]


% -----------------------

\color{lime}\par\noindent\rule{\textwidth}{0.4pt}\color{white}\\[1\baselineskip]

\textbf{Nom du fichier : \color{lime}Text.conf}\\[1\baselineskip]

\textbf{Dossier parent : \color{orange}\$\_\_BU\_MODULE\_UTILS\_ROOT\color{lime}/config/modules/main}\\[1\baselineskip]


% -----------------------

\color{blue}\par\noindent\rule{\textwidth}{0.4pt}\color{white}

\color{blue}
\subsubsection{Fonctions externes appelées}\color{white}

\textbf{Fonction : \color{mauve}BU::Main::Headers::DrawLine}\\[1\baselineskip]

\textbf{Description :} .\\[1\baselineskip]

\textbf{Fichier de définition : \color{lime}Checkings.lib}\\[1\baselineskip]


% -----------------------

\color{blue}\par\noindent\rule{\textwidth}{0.4pt}\color{white}

\color{blue}
\subsubsection{Variables globales externes et / ou variables d'environnement appelées}\color{white}

\textbf{Variable : \color{orange}\$\_\_BU\_MAIN\_COLOR...}\\[1\baselineskip]

\begin{justify}
    \textbf{Description :} Chacune des variables globales commençant par ce nom retourne un code couleu encodé lors de l'appel d'une de ces variables, grâce à l'appel simultané d'une fonction.
\end{justify}

\textbf{Fichier de définition : \color{lime}Colors.conf}\\[1\baselineskip]


% -----------------------

\color{orange}\par\noindent\rule{\textwidth}{0.4pt}\color{white}\\[1\baselineskip]

\textbf{Variable : \color{orange}\$\_\_BU\_MAIN\_PROJECT\_LOG\_FILE\_PATH}\\[1\baselineskip]

\begin{justify}
    \textbf{Description :} Cette variable enregistre le chemin du fichier de logs créé par le script d'initialisation si la valeur de la variable de statut associée est définie à \textbf{\color{gray}true}.
\end{justify}

\textbf{Fichier de définition : \color{lime}Project.conf} \\[1\baselineskip]


% -----------------------

\color{orange}\par\noindent\rule{\textwidth}{0.4pt}\color{white}\\[1\baselineskip]

\textbf{Variable : \color{orange}\$\_\_BU\_MAIN\_TXT\_CHAR\_HEADER\_LINE}\\[1\baselineskip]

\textbf{Description :}
\begin{justify}
    Cette variable contient le caractère à afficher en tant que ligne de header.
\end{justify}

\textbf{Fichier de définition : \color{lime}Text.conf}\\[1\baselineskip]


% -----------------------

% -----------------------------------------------

% /////////////////////////////////////////////////////////////////////////////////////////////// %

\color{red}\par\noindent\rule{\textwidth}{0.4pt}\color{white}

\color{red}
\section{Fonctions}\color{white}

\color{green}
\subsection{Sous-section ``CHECKING VALUES''}

\color{blue}
\subsubsection{BU::Main::Status::ConfEcho}\color{white}

\begin{justify}
\textbf{Description de la fonction :}\\[1\baselineskip]
    Cette fonction retourne un message d'erreur en cas de mauvaise valeur définie dans une variable de statut.
\end{justify}

\begin{justify}
   	Ce message est structuré de la manière suivante :

   	\begin{itemize}
   		\item Le nom du fichier où s'est produite l'erreur, ainsi que la ligne, suivi de la description de l'erreur renvoyée par la fonction vérifiant la valeur de la variable de statut,\setlength{\parskip}{1em}

   		\item la valeur défectueuse enregistrée,

   		\item la liste des valeurs autorisées.
   	\end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    \textbf{Paramètres :}
    \begin{itemize}
        \item \textbf{\color{orange}\$p\_file\color{white} :} le fichier dans lequel cette fonction est appelée (de préférence avec la commande \textbf{\textbf{"\$(\color{gray}basename \color{white}"\color{orange}\$BASH\_SOURCE[0]\color{white}")")}}.\setlength{\parskip}{1em}

        \item \textbf{\color{orange}\$p\_lineno\color{white} :} le numéro de ligne où cette fonction est appelée (de préférence avec la variable d'environnement \textbf{\color{orange}\$LINENO}).

        \item \textbf{\color{orange}\$p\_bad\_value\color{white} :} La mauvaise valeur passée en argument\color{white}.

        \item \textbf{\color{orange}\$p\_var\_name\color{white} :}  Nom de la variable globale de statut où la mauvaise valeur a été enregistrée.\color{white}

        \item \textbf{\color{orange}\$pa\_correctValues\color{white} :} Tableau contenant la liste des valeurs acceptées par la variable globale de statut.
    \end{itemize}
\end{justify}\setlength{\parskip}{2em}

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}\setlength{\parskip}{1em}
    \textbf{Variables :}

    \begin{itemize}
        \item \textbf{\color{orange}\$i\color{white} :} .
    \end{itemize}
\end{justify}

\begin{justify}
    \textbf{Code :}
    \begin{itemize}
        \item 
    \end{itemize}

\end{justify}


% -----------------------------------------------

\color{green}\par\noindent\rule{\textwidth}{0.4pt}\color{white}

\color{green}
\subsection{Sous-section "CHECKINGS"}\color{white}

\begin{justify}
    Cette section contient toutes les fonctions vérifiant que la variable de statut associée possède une valeur valide.
\end{justify}

\color{blue}
\subsubsection{BU::Main::Status::CheckSTAT\_*}\color{white}

\begin{justify}
    \textbf{Description :}\\[1\baselineskip]
    Chacune de ces fonctions vérifie que la valeur de la variable globale de statut en cours de traitement soit égale à une valeur attendue, sans quoi l'exécution du script s'arrête.
\end{justify}\setlength{\parskip}{1em}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    \textbf{Paramètres :}\\[1\baselineskip]
    \begin{tabular}{|l|l|}
        \hline
        \textbf{\color{orange}p\_file} & Chemin\\
        \hline
        \textbf{\color{orange}p\_lineno} & Nombre entier\\
        \hline
    \end{tabular}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    \textbf{Variables :}\\[1\baselineskip]
    \begin{tabular}{|l|l|}
        \hline
        \textbf{\color{orange}va\_correctValues} & Tableau\\
        \hline
    \end{tabular}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    \textbf{Fonctionnement :}\\[1\baselineskip]
    Pour chaque fonction, un tableau est d'abord défini (\textbf{\color{orange}va\_correctValues}) pour y enregistrer les valeurs acceptées par la variable globale de statut en cours de traitement.
\end{justify}

\begin{justify}
    Si aucune valeur correcte n'est enregistrée, alors la fonction \textbf{\color{mauve}BU::Main::Status::ConfEcho} est appelée, et ces valeurs sont passées, dans l'ordre, en argument :
    
    \begin{enumerate}
        \item Le fichier dans lequel la valeur de cette variable a été vérifiée,
        \item La ligne à laquelle l'opération mentionnée ci-dessus a été effectuée,
        \item La valeur actuelle de la variable globale de statut en cours de traitement,
        \item Le nom de cette variable,
        \item Le tableau de valeurs correctes de la variable.
    \end{enumerate}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    \textbf{Exceptions par fonctions :}
\end{justify}

\begin{justify}
    \begin{enumerate}
        \item
        {
            ère exception :

            \begin{justify}
                La fonction \textbf{\color{mauve}BU::Main::Status::CheckSTAT\_LOG} effectue une nouvelle vérification après la vérification de la valeur actuelle de la variable globale de statut.
            \end{justify}

            \begin{justify}
                \textbf{\color{brick}Si} la valeur enregistrée dans la variable globale de statut \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_LOG} correspond à la chaîne \textbf{true} \textbf{\color{brick}ET si} le fichier de logs n'existe pas encore (la chaîne de caractères (chemin) enregistrée dans la variable globale de projet \textbf{\color{orange}\$\_\_BU\_MAIN\_PROJECT\_LOG\_FILE\_PATH}),
            \end{justify}

            \begin{justify}
                \textbf{\color{brick} alors} la fonction \textbf{\color{mauve}BU::Main::Files::CreateProjectLogFile} est appelée pour créer le fichier de logs.
            \end{justify}

            \begin{justify}
                \textbf{\color{brick}Fin de la condition}.
            \end{justify}
        }
    \end{enumerate}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    \textbf{Utilisation :}\\[1\baselineskip]
    Appelez la fonction dédiée au traitement de la variable globale de statut dont vous souhaitez vérifier si sa valeur est correcte.
\end{justify}

\begin{justify}
    Si vous souhaitez en faire ainsi après avoir assigné une nouvelle valeur à la variable, il est recommandé d'appeler sa fonction dédiée, définie dans la sous-catégorie \textbf{\color{green}CHANGING VALUES MORE EASILY}, et documentée ci-dessous, dans ce document.
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
     \textbf{Liste des variables globales de statut :}
\end{justify}

\begin{justify}
    \textit{Description de la variable :}
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l|l}
                \textbf{Nom de la variable} & \textbf{Type} & \textbf{Valeurs acceptées}
            \end{tabular}
        }
    \end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    Cette variable de statut sert à lancer un déboguage de certaines fonctionnalités (dans une section de code écrite de préférence au début du script principal), sans attendre l'atteinte à cette fonctionnalité si le code de cette dernière est écrit trop loin dans un script.
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l|l}
                \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_DEBUG}  & Bool & \textbf{false} || \textbf{true} \\[1\baselineskip]
            \end{tabular}
        }
    \end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    Cette variable de statut sert à autoriser, empêcher \textbf{OU} restreindre l'exécution de la fonction de décoration de texte avancée \textbf{\color{mauve}Decho}, en fonction des situations où l'appel de cette fonctions peut provoquer ou non une boucle infinie.
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l|l}
                \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_DECHO}  & String    & \textbf{authorize} || \textbf{forbid} || \textbf{restrict}\\[1\baselineskip]
            \end{tabular}
        }
    \end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    Cette variable de statut sert à totalement autoriser \textbf{OU} empêcher l'exécution de la fonction \textbf{\color{mauve}BU::CheckProjectLogStatus}, notamment dans le cas où une fonction d'affichage de texte formaté est appelée à l'intérieur de cette fonction, où via une autre fonction appelée dans le même cas.
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l|l}
                \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_ECHO}   & Bool      & \textbf{false} || \textbf{true}\\[1\baselineskip]
            \end{tabular}
        }
    \end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    Cette variable de statut sert à déterminer la gravité d'une erreur selon le contexte. Ce choix est à déterminer par l'utilisateur, et la valeur de cette variable est traitée par la fonction \textbf{\color{mauve}BU::Main::Errors::HandleErrors()} du fichier de librairie \textbf{\color{lime}Checkings.lib}.
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l|l}
                \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_ERROR}  & String    & \textit{aucune valeur} || \textbf{fatal}\\[1\baselineskip]
            \end{tabular}
        }
    \end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    Cette variable de statut sert à déterminer si la librairie est en phase d'initialisation des modules.
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l|l}
                \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_INITIALIZING}       & Bool  & \textbf{false} || \textbf{true}\\[1\baselineskip]
            \end{tabular}
        }
    \end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    Cette variable de statut sert à autoriser ou non la création d'un fichier de logs pour le projet en cours.
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l|l}
                \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_LOG}    & Bool      & \textbf{false} || \textbf{true}\\[1\baselineskip]
            \end{tabular}
        }
    \end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    Cette variable vérifie si un message peut être affiché à l'écran, redirigé vers un fichier de logs, ou les deux à la fois.
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l|l}
                \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_LOG\_REDIRECT}  & String & \textit{aucune valeur} || \textbf{log} || \textbf{tee}\\[1\baselineskip]
            \end{tabular}
        }
    \end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    Cette variable vérifie si une opération sur un fichier ou un dossier localisé à la racine du système de fichiers peut être effectuée.
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l|l}
                \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_OPERATE\_ROOT}  & String & \textbf{authorized} || \textbf{forbidden} || \textbf{restricted}\\[1\baselineskip]
            \end{tabular}
        }
    \end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    Cette variable sert à mettre en pause l'exécution du script pendant un temps bref lors de l'affichage d'un header.
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l}
                \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_TIME\_HEADER}   & Float\\[1\baselineskip]
            \end{tabular}
        }
    \end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    Cette variable sert à mettre en pause l'exécution du script pendant un temps bref lors de l'affichage d'un saut de ligne.
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l}
                \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_TIME\_NEWLINE}  & Float\\[1\baselineskip]
            \end{tabular}
        }
    \end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    Cette variable sert à mettre en pause l'exécution du script pendant un temps bref lors de l'affichage d'un message à l'écran.
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l}
                \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_TIME\_TXT}  & Float\\[1\baselineskip]
            \end{tabular}
        }
    \end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    Cette variable de statut vérifie que le script ait la permission de formater le texte (couleurs, gras, italique, soulignage, clignotement, etc...).
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l|l}
                \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_TXT\_FMT}   & Bool & \textbf{false} || \textbf{true}\\[1\baselineskip]
            \end{tabular}
        }
    \end{itemize}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
\textbf{ATTENTION : Cette variable est dépreciée et sera déplacée dans le module \textbf{\color{lime}os\_specific} dans une prochaine mise à jour}
\end{justify}

\begin{justify}
     \begin{itemize}
        \item
        {
            \begin{tabular}{l|l|l}
                \textbf{\color{orange}\$\_\_BU\_MAIN\_STAT\_USER\_OS}   & &\\[1\baselineskip]
            \end{tabular}
        }
    \end{itemize}
\end{justify}


% -----------------------

\color{blue}\par\noindent\rule{\textwidth}{0.4pt}\color{white}

\color{blue}
\subsubsection{BU::Main::Status::CheckProjectStatusVars}\color{white}

\begin{justify}
    \textbf{Description de la fonction :}\\[1\baselineskip]
    Cette fonction appelle toutes les fonctions précédemment définies pour tester chacune des valeurs des variables globales de statut une par une.
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    \textbf{Paramètres :}\\[1\baselineskip]
    \begin{tabular}{|l|l|}
        \hline
        \textbf{\color{orange}p\_file} & Chemin\\
        \hline
        \textbf{\color{orange}p\_lineno} & Nombre entier\\
        \hline
    \end{tabular}
\end{justify}

% -----------------------

\par\noindent\rule{\textwidth}{0.4pt}

\begin{justify}
    \textbf{Variables :}
    \begin{itemize}
        \item \textbf{Aucune}
    \end{itemize}
\end{justify}


% -----------------------

% -----------------------------------------------

\color{green}\par\noindent\rule{\textwidth}{0.4pt}\color{white}

\color{green}
\subsection{Sous-section "CHANGING VALUES MORE EASILY"}\color{white}

\begin{justify}
    \textbf{Note 1 :} Cette sous-section contient des fonctions appelant l'une des fonctions de la sous-section précédente, pour réduire la charge de travail du développeur lorsqu'il souhaite modifier la valeur d'une variable de statut tout en assurant le fait qu'elle contienne une valeur correcte.
\end{justify}

\begin{justify}
    \textbf{Note 2 :} Chaque fonction définie dans cette sous-section attend les trois mêmes paramètres positionnels, dont les informations sont données en commentaire sous le nom de la sous-section.
\end{justify}

\begin{itemize}
    \item
    {
        \begin{justify}
            \textbf{\$1 :} Ce paramètre contient la nouvelle valeur à assigner à la variable globale de statut traitée par la fonction.
        \end{justify}

        \begin{justify}
            \item \textbf{\$2 :} Ce paramètre contient le chemin du fichier où le changement de valeur a été effectué. Il s'agit du premier argument de chaque fonction \textbf{\color{mauve}CheckSTAT\_} définie dans la sous-section précédente.
        \end{justify}

        \begin{justify}
            \item \textbf{\$3 :} Ce paramètre contient le numéro de la ligne où le changement de valeur a été effectué. Il s'agit du second argument de chaque fonction \textbf{\color{mauve}CheckSTAT\_} définie dans la sous-section précédente.
        \end{justify}
    }
\end{itemize}


% -----------------------

% -----------------------------------------------

\color{green}\par\noindent\rule{\textwidth}{0.4pt}\color{white}

\color{green}
\subsection{Sous-section "EASIER BOOLEAN VALUES CHECKINGS"}\color{white}

\begin{justify}
    Ces fonctions servent à vérifier si la valeur d'une des variables globales de statut contienne la valeur \textbf{vrai} ou la valeur \textbf{faux} (variables booléenes uniquement).
\end{justify}

\begin{justify}
    Chacune d'entre elles vérifie si la variable traitée contient la valeur \textbf{vrai}, et retourne la valeur 0 (fonction executée comme souhaitée), ou 1 le cas échéant.
\end{justify}

\end{document}
