#!/usr/bin/env bash

# /////////////////////////////////////////////////////////////////////////////////////////////// #

#### TEXT WRITING AND DECORATION

## COLOR A PART OF A TEXT WITH ANOTHER COLOR.
## Pun between "deco(ration)" and "echo", followed by the first letter of the message type name (header (H), moving to a new sub-step (N), error (E) or success (S)).

function Decho() { local string=$1; echo "$COL_CYAN$string$COL_RESET"; }    # Colouring a part of a simple message written via the "echo" command.
function DechoE() { local string=$1; echo "$COL_CYAN$string$COL_RED"; }     # Error message
function DechoH() { local string=$1; echo "$COL_BLUE$string$COL_CYAN"; }    # Header text
function DechoN() { local string=$1; echo "$COL_CYAN$string$COL_YELLOW"; }  # New sub-step message
function DechoS() { local string=$1; echo "$COL_CYAN$string$COL_GREEN"; }   # Success message

# -----------------------------------------------

## DISPLAYING A MESSAGE ACCORDING TO THE CONTEXT AND THE "$MAIN_SCRIPT_LOG" VARIABLE VALUE.

# Avoid repetiting code
function Redirect()
{
    #***** Parameters *****
    local string=$1
    
    #***** Code *****
    if [ -z "$BU_FILE_LOG_PATH" ]; then
        echo "$string"
    else
        if [ "$BU_FILE_LOG_STATUS" = "log" ]; then
            echo "$string" >> "$BU_FILE_LOG_PATH"
            
        elif [ "$BU_FILE_LOG_STATUS" = "tee" ]; then
            echo "$string" 2>&1 | tee -a "$BU_FILE_LOG_PATH"
            
        else
            echo "EchoError : no valid write output mode defined"
        
            return
        fi
    fi
}

# Error message
function EchoError() {
    #***** Parameters *****
    local string=$1
    local timer=$2
    
    #***** Code *****
    if [ -z "$timer" ]; then
        timer=".5"
    fi
    
    Redirect "$BU_TXT_RED_TAB $string$BU_COL_RESET"

    sleep "$timer"
}

# New sub-step message
function EchoNewstep() { local string=$1; 
    #***** Parameters *****
    local string=$1
    local timer=$2
    
    #***** Code *****
    if [ -z "$timer" ]; then
        timer=".5"
    fi
    
    Redirect "$TXT_N_TAB $string$COL_RESET"

    sleep "$timer"
}

# Success message
function EchoSuccess() { 
    #***** Parameters *****
    local string=$1
    local timer=$2

    #***** Code *****
    if [ -z "$timer" ]; then
        timer=".5"
    fi
    
    Redirect "$TXT_S_TAB $string$COL_RESET"

    sleep "$timer"
}


# /////////////////////////////////////////////////////////////////////////////////////////////// #

#### LINE BREAKS

## LINE BREAKS ACCORDING TO THE "$MAIN_SCRIPT_LOG" VARIABLE VALUE.

# Redirecting the output of the "echo" command
function Newline()
{
    Redirect ""
}
