#!/usr/bin/env bash

# ----------------------
# SCRIPT'S INFORMATIONS

# Name          : Case.lib
# Description   : 
# Author(s)     : Dimitri Obeid
# Version       : 

# DO NOT EXECUTE IT DIRECTLY, instead, just source it by calling the "__BASH_UTILS_FUNCTIONS_FILES_PATH" array in the initializer file.

# /////////////////////////////////////////////////////////////////////////////////////////////// #

# Preventing the direct execution of this file, as this script is not meant to be directly executed, but sourced.
if [ "${0##*/}" == "${BASH_SOURCE[0]##*/}" ]; then
    echo -e "WARNING !" >&2; echo >&2
    echo -e "This shell script (${BASH_SOURCE[0]}) is not meant to be executed directly !" >&2
    echo -e "Use this script only by sourcing it in your project script." >&2; echo >&2

    exit 1
fi

# ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; #

#################################### DEFINING LIBRARY FUNCTIONS ###################################

#### LIBRARY RESOURCES

## VARIABLES

__BU_CASE_INVALID_ANSWER="Please enter a valid answer ($(DechoHighlight 'yes') or ($(DechoHighlight 'no')) !"

# -----------------------------------------------



# /////////////////////////////////////////////////////////////////////////////////////////////// #

#### READING CASE STATEMENTS BY FUNCTIONS

## "Checkings.lib" FILE

# "TriggerRootDirWarning" function.
function CaseRead_TriggerRootDirWarning()
{
    EchoWarning "Do you want to continue the script's execution ? (yes / no)"
	read -rp "Enter your answer : " __read_TriggerRootDirWarning
	EchoRead "$__read_TriggerRootDirWarning"
	Newline

	# shellcheck disable=SC2154
	case "${__read_TriggerRootDirWarning,,}" in
		"yes")
			return 0
			;;
		"no")
			return 1
			;;
		*)
			EchoError "$__BU_CASE_INVALID_ANSWER"
			CaseRead_TriggerRootDirWarning
			;;
	esac
}

# "HandleErrors" function, with the "$__BU_STAT_ECHO" CheckTxtFmt set to "false".
function CaseRead_HandleErrors()
{
	EchoWarning "Do you want to continue the script's execution ? (yes / no)"
	read -rp "Enter your answer : " __read_TriggerRootDirWarning
	EchoRead "$__read_TriggerRootDirWarning"
    Newline

	# shellcheck disable=SC2154
	case "${__read_HandleErrors,,}" in
		"yes")
			EchoNewstep "Resuming the execution of the $(DechoHighlight "$__BU_PROJECT_NAME") script."
			
			return 0
			;;
		"no")
			EchoError "Aborting the $(DechoHighlight "$__BU_PROJECT_NAME")'s execution."
			
			ExitError '1'
			;;
		*)
			EchoError "$__BU_CASE_INVALID_ANSWER"
			CaseRead_HandleErrors
			;;
	esac
}
