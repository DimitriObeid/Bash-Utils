#!/usr/bin/env bash

# Preventing the direct execution of this file, as this script is not meant to be directly executed, but sourced.
if [ "${0##*/}" == "${BASH_SOURCE[0]##*/}" ]; then
    echo -e "WARNING !" >&2; echo >&2
    echo -e "This shell script (${BASH_SOURCE[0]}) is not meant to be executed directly !" >&2
    echo -e "Use this script only by sourcing it in your project script." >&2; echo >&2

    exit 1
fi

# ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; #

#################################### DEFINING LIBRARY FUNCTIONS ###################################

#### LIBRARY RESOURCES

## VARIABLES

__BU_CASE_INVALID_ANSWER="Please enter a valid answer ($(DechoHighlight 'yes') or ($(DechoHighlight 'no')) !"

# -----------------------------------------------



# /////////////////////////////////////////////////////////////////////////////////////////////// #

#### READING CASE STATEMENTS BY FUNCTIONS

## "Checkings.lib" FILE

# "TriggerRootDirWarning" function.
function CaseRead_TriggerRootDirWarning()
{
    EchoWarning "Do you want to continue the script's execution ? (yes / no)"
	read -rp "Enter your answer : " __read_TriggerRootDirWarning
	EchoRead "$__read_TriggerRootDirWarning"
	Newline

	# shellcheck disable=SC2154
	case "${__read_TriggerRootDirWarning,,}" in
		"yes")
			;;
		"no")
			;;
		*)
			EchoError "$__BU_CASE_INVALID_ANSWER"
			CaseRead_TriggerRootDirWarning
			;;
	esac
}

# "HandleErrors" function, with the "$__STAT_CPLS" variable set to "false".
function CaseRead_HandleErrors()
{
	EchoWarning "Do you want to continue the script's execution ? (yes / no)"
	read -rp "Enter your answer : " __read_TriggerRootDirWarning
	EchoRead "$__read_TriggerRootDirWarning"
    Newline

	# shellcheck disable=SC2154
	case "${__read_HandleErrors,,}" in
		"yes")
			EchoNewstep "Resuming the execution of the $(DechoHighlight "$__BU_PROJECT_NAME") script."
			
			return 0
			;;
		"no")
			EchoError "Aborting the $(DechoHighlight "$__BU_PROJECT_NAME")'s execution."
			
			ExitError '1'
			;;
		*)
			EchoError "$__BU_CASE_INVALID_ANSWER"
			CaseRead_HandleErrors
			;;
	esac
}

# "HandleErrors" function, with the "$__STAT_CPLS" variable set to "true".
function CaseRead_HandleErrorsCPLS()
{
	EchoWarning "Do you want to continue the script's execution ? (yes / no)"
	read -rp "Enter your answer : " __read_TriggerRootDirWarning
	EchoRead "$__read_TriggerRootDirWarning"
    Newline

	# shellcheck disable=SC2154
	case "${__read_HandleErrorsCPLS,,}" in
		"yes")
			__BU_TXT_STORE_ERROR_MESSAGES_ARRAY+=("$(echo -e "Resuming the execution of the $(DechoHighlight "$__BU_PROJECT_NAME") script." >&2s)")

			return 0
			;;
		"no")
			__BU_TXT_STORE_ERROR_MESSAGES_ARRAY+=("$(echo -e "Aborting the $(DechoHighlight "$__BU_PROJECT_NAME")'s execution." >&2)")

			exit 1; kill "$$"
			;;
		*)
			__BU_TXT_STORE_ERROR_MESSAGES_ARRAY+=("$(echo -e "$__BU_CASE_INVALID_ANSWER" >&2)")
			CaseRead_HandleErrorsCPLS
			;;
	esac
}
